CREATE SCHEMA if not exists proyecto_sebastian_hernandez;

-- DROP SCHEMA proyecto_sebastian_hernandez;

USE proyecto_sebastian_hernandez;


-- TABLA DE EMPLEADOS 
 CREATE TABLE if not exists EMPLEADOS (
		id_empleado int auto_increment not null,		-- IDENTIFICADOR PARA EMPLEADOS		
		id_sucursal int not null,						-- IDENTIFICADOR DE LA SUCURSAL PARA LA QUE TRABAJA
       id_horario int not null,						-- IDENTIFICADOR DEL HORARIO QUE CUMPLIRIA CADA EMPLEADO
       id_cargo int not null,							-- IDENTIFICADOR DEL CARGO QUE CUMPLE (VENDEDOR/ENCARGADO)
        nombre varchar(15) not null,					-- NOMBRE DEL EMPLEADO
        apellido varchar (20) not null,					-- APELLIDO DEL EMPLEADO
        email varchar(70) not null,						-- EMAIL DEL EMPLEADO
        dni int not null,								-- DNI DEL EMPLEADO
        direccion varchar(100) not null,				-- DIRECCION DE RECIDENCIA DEL EMPLEADO
		fecha_ingreso date not null,					-- FECHA EN LA QUE EMPEZÓ A TRABAJAR
        telefono int not null,							-- NUMERO DE TELEFONO DEL EMPLEADO
        fecha_salida date,								-- FECHA DE SALIDA (DESPIDO/RENUNCIA) SERÁ NULO HASTA QUE SE CUMPLA LA CONDICION
        liquidacion int,								-- MONTO ($) DE LIQUIDACION DE CADA EMPLEADO QUE RENUNCIE O SE DESPIDA, SERÁ NULO HASTA QUE SE CUMPLA LA CONDICION
CONSTRAINT PK_EMPLEADO PRIMARY KEY (id_empleado)		-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
		);
        
        
-- TABLA QUE INDICA EL CARGO QUE REALIZAN LOS EMPLEADOS
CREATE TABLE  if not exists CARGO (
        id_cargo int auto_increment not null,			-- IDENTIFICADOR DEL CARGO QUE EJERCEN LOS EMPLEADOS 
        tipo varchar(15),								-- CARGO QUE EJERCE CADA EMPLEADO
CONSTRAINT PK_CARGO PRIMARY KEY (id_cargo)				-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
        );
        
        
-- TABLA QUE ENUMERA LAS SUCURSALES
CREATE TABLE if not exists SUCURSAL (
        id_sucursal int auto_increment not null,		-- IDENTIFICADOR DE SUCURSAL
        id_empleado int not null,						-- IDENTIFICADOR DE EMPLEADO QUE SE SEÑALA ACÁ PARA ACLARAR QUE ES EL ENCARGADO
        direccion varchar(100) not null,				-- DIRECCION DE LA SUCURSAL
CONSTRAINT PK_SUCURSAL PRIMARY KEY (id_sucursal)		-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
        );
        
        
-- TABLA DE HORARIOS
CREATE TABLE if not exists HORARIOS (
		id_horario int auto_increment not null,			-- IDENTIFICACION DE HORARIO
		descripcion varchar(30) not null,				-- DESCRIPCION DEL HORARIO (ESTABLECE NOMBRE DEL HORARIO QUE CUMPLE EL EMPLEADO)
		cantidad_horas int not null,					-- CANTIDAD DE HORAS DE TRABAJO POR DESCRIPCION DE HORARIO (8HRS/10HRS/ETC...)
		remuneracion int not null,						-- REMUNERACION POR DESCRIPCION DE HORARIO ($4000/$5000/ETC...)
CONSTRAINT PK_HORARIOS PRIMARY KEY (id_horario)			-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
);


--  TABLA DE PRODUCTOS QUE SE VENDEN POR SUCURSAL
CREATE TABLE if not exists PRODUCTOS (
		id_producto int auto_increment not null,		-- IDENTIFICADOR DEL PRODUCTO
		descripcion varchar(30) not null,				-- DESCRIPCION DEL PRODUCTO (NOMBRE)
		descripcion_adicional varchar(90) not null,		-- DESCRIPCION ADICIONAL DEL PRODCUTO (INGREDIENTES)
		precio int not null,							-- PRECIO DEL PRODUCTO
CONSTRAINT PK_PRODUCTOS PRIMARY KEY (id_producto)		-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
);	


-- TABLA TIPO DE ORDEN
CREATE TABLE if not exists TIPO_DE_ORDEN (
		 id_tipo_orden int auto_increment not null,		-- IDENTIFICADOR DEL TIPO DE ORDEN
         tipo varchar(25),								-- NOMBRE DEL TIPO DE ORDEN (TAKE AWAY/ENVIO DEL LOCAL/PROGRAMADO/ETC...)
CONSTRAINT PK_TIPO_DE_ORDEN PRIMARY KEY (id_tipo_orden) -- LLAVE PRIMARIA: RENOMBRE Y SELECCION
);


-- TABLA PAGOS
CREATE TABLE if not exists PAGOS (
		id_pagos int auto_increment not null,			-- IDENTIFICADOR DE METODO DE PAGO
        tipo varchar(15) not null,						-- TIPO/NOMBRE DEL METODO DE PAGO
CONSTRAINT PK_PAGOS PRIMARY KEY (id_pagos)				-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
);


-- TABLA DE ORDENES 
CREATE TABLE if not exists ORDENES (
		id_orden int auto_increment not null,			-- IDENTIFICADOR DE ORDEN
        id_tipo_orden int not null,						-- IDENTIFICADOR DEL TIPO DE ORDEN
        id_cliente int not null,						-- IDENTIFICADOR DEL CLIENTE 
        id_empleado int not null,						-- IDENTIFICADOR DE EMPLEADO QUE REALIZA LA VENTA 
CONSTRAINT PK_ORDENES PRIMARY KEY (id_orden)			-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
);


-- TABLA ORDENES has PRODUCTOS
CREATE TABLE if not exists DETALLE_DE_ORDENES (
		id_detalle int auto_increment not null,			-- IDENTIFICADOR DE DETALLE DE ORDENES 
        id_orden int not null,							-- IDENTIFICADOR DE ORDEN (INCLUYE TIPO/CLIENTE/Y EMPLEADO QUE REALIZA LA VENTA)
        id_producto int not null,						-- IDENTIFICADOR DE PRODUCTOS (CADA PRODUCTO QUE SE VENDE)
        id_pagos int not null,							-- IDENTIFICADOR DEL METODO DE PAGO QUE SE UTILIZA PARA LA COMPRA
        fecha_hora timestamp not null,					-- FECHA CORRIENTE DEL PEDIDO
CONSTRAINT PK_DETALLE PRIMARY KEY (id_detalle)			-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
);
-- SOMENTER A REVISION 


-- TABLA DE CLIENTES
CREATE TABLE if not exists CLIENTES (
		id_cliente int auto_increment not null,			-- IDENTIFICADOR DE CLIENTE
        nombre varchar(45) not null,					-- NOMBRE DEL CLIENTE
        apellido varchar(45) not null, 					-- APELLIDO DEL CLIENTE 
        dni int not null,								-- DNI DEL CLIENTE 
        telefono int not null,							-- TELEFONO DEL CLIENTE 
        direccion varchar(80) not null,					-- DIRECCION DEL CLIENTE(CALLE/ALTURA/ZONA)
        indicaciones varchar(100) not null,				-- INFORMACION ADICIONAL DEL CLIENTE DE CUALQUIER TIPO (INDICACIONES PARA LA ENTREGA O  ALGUN METODO DE PAGO PREDETERMINADO)
CONSTRAINT PK_CLIENTES PRIMARY KEY (id_cliente)
);


-- TABLA QUE INDICA LOS EGRESOS MONETARIOS DE LAS SUCURSALES
CREATE TABLE if not exists EGRESOS (
		id_egresos int auto_increment not null,			-- IDENTIFICADOR DE EGRESOS
        id_concepto int not null,						-- IDENTIFICADOR DE CONCEPTO (INDICA CON LA OTRA TABLA A QUE SE DEBE EL EGRESO)
        monto int not null,								-- INCLUYE EL MONTO DEL EGRESO
        fecha_hora timestamp,							-- FECHA Y HORA DEL EGRESO
CONSTRAINT PK_EGRESOS PRIMARY KEY (id_egresos)			-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
);


-- TABLA QUE DETALLA EL GASTO CORRESPONDIENTE 
CREATE TABLE if not exists CONCEPTO_DE_EGRESO (
		id_concepto int auto_increment not null,		-- IDENTIFICADOR DEL CONCEPTO DE GASTO
        concepto varchar(50) not null,					-- CONCEPTO DEL GASTO 
CONSTRAINT PK_CONCEPTO PRIMARY KEY (id_concepto)		-- LLAVE PRIMARIA: RENOMBRE Y SELECCION
);


-- LLAVES FORANEAS 
-- LLAVES FORANEAS DE LA TABLA (EMPLEADOS)
-- LLAVE FORANEA REFERENCIANDO A LAS TABLA 'SUCURSAL'
ALTER TABLE EMPLEADOS ADD CONSTRAINT FK_EMPLEADO_SUCURSAL FOREIGN KEY (id_sucursal)
REFERENCES SUCURSAL (id_sucursal);

-- LLAVE FORANEA REFERENCIANDO LA TABLA 'HORARIO'
ALTER TABLE EMPLEADOS ADD CONSTRAINT FK_EMPLEADO_HORARIO FOREIGN KEY (id_horario)
REFERENCES HORARIOS (id_horario);

-- LLAVE FORANEA  REFERENCIANDO LA TABLA 'CARGO'
ALTER TABLE EMPLEADOS ADD CONSTRAINT FK_EMPLEADO_CARGO FOREIGN KEY (id_cargo)
REFERENCES CARGO (id_cargo);

-- LLAVES FORANEAS DE  LA TABLA (SUCURSAL)
ALTER TABLE SUCURSAL ADD CONSTRAINT FK_SUCURSAL_EMPLEADO FOREIGN KEY (id_empleado)
REFERENCES EMPLEADOS (id_empleado);

-- LLAVES FORANEAS DE LA TABLA (ORDENES)
-- LLAVE FORANEA REFERENCIANDO LA TABLA 'TIPO'
ALTER TABLE ORDENES ADD CONSTRAINT FK_ORDENES_TIPO FOREIGN KEY (id_tipo_orden)
REFERENCES TIPO_DE_ORDEN (id_tipo_orden);

-- LLAVE FORANEA REFERENCIANDO LA TABLA 'CLIENTES'
ALTER TABLE ORDENES ADD CONSTRAINT FK_ORDENES_CLIENTE FOREIGN KEY (id_cliente)
REFERENCES CLIENTES (id_cliente);

-- LLAVE FORANEA REFERENCIANDO LA TABLA 'EMPLEADOS'
ALTER TABLE ORDENES ADD CONSTRAINT FK_ORDENES_EMPLEADOS FOREIGN KEY (id_empleado)
REFERENCES EMPLEADOS (id_empleado);

-- LLAVES FORANEAS DE LA TABLA (ORDENES TIENEN PRODUCTOS)
-- LLAVE FORANEA REFERENCIANDO LA TABLA 'ORDENES'
ALTER TABLE DETALLE_DE_ORDENES ADD CONSTRAINT FK_DETALLE_ORDEN FOREIGN KEY (id_orden)
REFERENCES ORDENES (id_orden);

-- LLAVE FORANEA REFERENCIANDO LA TABLA 'PRODUCTOS'
ALTER TABLE DETALLE_DE_ORDENES ADD CONSTRAINT FK_DETALLE_PRODUCTO FOREIGN KEY (id_producto)
REFERENCES PRODUCTOS (id_producto);


-- LLAVE FORANEA REFERENCIANDO LA TABLA 'PAGO'
ALTER TABLE DETALLE_DE_ORDENES ADD CONSTRAINT FK_DETALLE_PAGO FOREIGN KEY (id_pagos)
REFERENCES PAGOS (id_pagos);

-- LLAVES FORANEAS DE LA TABLA 'EGRESOS'
ALTER TABLE EGRESOS ADD CONSTRAINT FK_EGRESOS FOREIGN KEY (id_concepto)
REFERENCES CONCEPTO_DE_EGRESO (id_concepto);
